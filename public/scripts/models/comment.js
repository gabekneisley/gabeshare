define(["underscore","backbone","moment","session"],function(e,t,n,r){var i={formatDate:function(){var e=n(this.get("comment").date_posted).format(o.DATE_FORMAT);return/Tue /.test(e)?e.replace("Tue","Tues"):e},toRender:function(){var e=this.toJSON();return e.comment.date_posted=this.formatDate(),e}},s={DATE_FORMAT:"ddd MMM Do",maxId:3,nextId:function(){return this.maxId+=1,this.maxId},parseDate:function(e){var t=e.split(" ").slice(1),r,i,s=n().year();switch(t[0]){case"Jan":r="01";break;case"Feb":r="02";break;case"Mar":r="03";break;case"Apr":r="04";break;case"May":r="05";break;case"Jun":r="06";break;case"Jul":r="07";break;case"Aug":r="08";break;case"Sep":r="09";break;case"Oct":r="10";break;case"Nov":r="11";break;case"Dec":r="12"}return i=t[1].match(/\d{1,2}/)[0],date=n([r,i,s].join("-"),"MM-DD-YYYY"),date.isAfter(n())&&date.subtract("y",1),date.toISOString()},fromJSON:function(e){return e.comment.date_posted=o.parseDate(e.comment.date_posted),new o(e)},fromText:function(e){var t={};return t.id=o.nextId,t.comment={date_posted:n().toISOString(),description:e},t.user=r.currentUser(),new o(t)}},o=t.Model.extend(i,s);return o});